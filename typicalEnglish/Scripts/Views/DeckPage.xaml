<Page x:Class="typicalEnglish.Scripts.Views.DeckPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:typicalEnglish"
      xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
      xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
      mc:Ignorable="d" 
       xmlns:dd="urn:gong-wpf-dragdrop"
      xmlns:vm="clr-namespace:typicalEnglish.Scripts.ViewModels"
      d:DesignHeight="450" d:DesignWidth="800"
      Title="DeckPage" DataContext="{x:Static local:App.DeckVM}"
      FontFamily="Candara Light">

    <Grid>
        <!--#region Row Definitions-->

        <Grid.RowDefinitions>
            <RowDefinition Height="70"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        
        <!--#endregion-->    
        
        <!--#region Back Button-->
        <Button Background="White" Height="45" Width="65" BorderBrush="Transparent"
                Content="{md:PackIcon Kind=ArrowBack,Size=30}" HorizontalAlignment="Left"
                VerticalAlignment="Top" Margin="5">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <i:InvokeCommandAction Command="{Binding BackCommand}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>
        <!--#endregion-->

        <!--#region Add Deck Button-->
        <Button HorizontalAlignment="Center" VerticalAlignment="Top" Background="Transparent"
                Height="70" Width="150" FontSize="25"
                Content="New word"
                    BorderBrush="Black" Style="{StaticResource InvisButton}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <i:InvokeCommandAction Command="{Binding AddWordCommand}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>

        <!--#endregion-->


        <ItemsControl Grid.Row="1" dd:DragDrop.IsDropTarget="True" ItemsSource="{Binding Words}"
                 HorizontalAlignment="Stretch">
            <ItemsControl.Resources>
                <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}"
                       x:Key="NoneBorder">
                    <Setter Property="BorderBrush" Value="Transparent"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="IsReadOnly" Value="True"/>
                    <Setter Property="md:TextFieldAssist.UnderlineBrush" Value="Transparent"/>
                </Style>
            </ItemsControl.Resources>
            <ItemsControl.ItemContainerStyle>
                <Style TargetType="ContentPresenter">
                    <Setter Property="HorizontalAlignment" Value="Stretch"></Setter>
                </Style>
            </ItemsControl.ItemContainerStyle>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel VerticalAlignment="Stretch">
                        <!--#region English Word-->
                        <Grid>
                            <StackPanel HorizontalAlignment="Center">
                                <TextBox Text="{Binding Spelling}" FontStyle="Italic"
                                       FontSize="30" Style="{StaticResource NoneBorder}"/>
                                <TextBox Text="{Binding  StringFormat=[{0}], Path=Transcription}"
                                           FontSize="15" HorizontalAlignment="Center" Style="{StaticResource NoneBorder}"/>
                            </StackPanel>
                            <Button Content="{md:PackIcon Kind=Edit}" HorizontalAlignment="Right"
                                BorderBrush="Transparent" BorderThickness="0" Background="Transparent"/>
                            <Button Content="{md:PackIcon Kind=More}" HorizontalAlignment="Left"
                                BorderBrush="Transparent" BorderThickness="0" Background="Transparent">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <i:InvokeCommandAction
                                            Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}},
                                     Path=DataContext.ShowInfoCommand}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </Button>
                        </Grid>
                        <!--#endregion-->
                        <!--#region MoreInformation-->
                        <Grid Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}},
                                     Path=DataContext.MoreVisibility}"
                              Name="MoreGrid">

                            <StackPanel>
                                <!--#region Translations-->
                                <TextBlock Text=" Translations:" FontSize="25"/>
                                <ItemsControl ItemsSource="{Binding Translations}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <TextBox Text="{Binding Path=.,StringFormat=' {0}'}" Style="{StaticResource NoneBorder}"
                                                         FontSize="20"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel Orientation="Horizontal" IsItemsHost="True">
                                            </WrapPanel>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                </ItemsControl>
                                <!--#endregion-->

                                <!--#region Examples-->
                                <TextBlock Text=" Examples:" FontSize="25"/>
                                <ItemsControl ItemsSource="{Binding Examples}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <vm:MvvmTextEditor Margin="5 0" Text="{Binding}" Colorizing="{Binding RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}},
                                                            Path=DataContext.Colorizing}" FontSize="23"
                                                               Background="Transparent" IsReadOnly="True"
                                                               ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                               ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="Loaded">
                                                        <i:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}, AncestorLevel=2},
                                                            Path=DataContext.LoadedCommand}" 
                                                                               CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}},
                                                            Path=DataContext}"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </vm:MvvmTextEditor>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <!--#endregion-->
                            </StackPanel>
                        </Grid>
                        <!--#endregion-->
                     
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

    </Grid>
</Page>
